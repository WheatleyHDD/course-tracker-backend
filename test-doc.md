# Временная документация

Каждый ответ будет содержать в себе JSON строку:

```json
{"success": true, "response": [...]}
```

При ошибках будет выдан такой ответ:

```json
{"success": false, "erron": "..."}
```

## Авторизация

### Регистрация

`POST /api/register`
Обязательные параметры:
- `first_name` - Имя
- `second_name` - Фамилия
- `middle_name` - Отчество
- `email` - E-mail
- `password` - Пароль

### Авторизация

`POST /api/login`
Обязательные параметры:
- `email` - E-mail
- `password` - Пароль

### Ответ при успехе:

```json
{"success": true, "response": {"email": "<EMAIL_ПОЛЬЗОВАТЕЛЯ>", "access_token": "<ТУТ_ТОКЕН>"}}
```

# Методы для работы с API

Все методы требуют параметр `access_token` - его можно получить после авторизации

## Работа с заявками

### Получить конкретную заявку

`POST /api/applications/:id`

Обязательный параметр:
- `id` - индентификатор заявки

Ответ в `response`:

- `id` - идентификатор заявки
- `course_name` - название курса
- `student` - email студента
- `cost` - цена
- `start_date` - начало обучения
- `end_date` - конец обучения
- `point` - цель обучения
- `status` - текущий статус заявки
- `changer` - поменявший её
- `change_date` - дата установки

### Получить все заявки пользователя

`POST /api/user-applications`
Необязательные параметры:
- `limit` - Количество записей от 10 до 100 (по умолчанию 10)
- `page` - Страница записей
- `student_email` - E-mail учащегося (для высокопоставленных)

Ответ в `response` (массив):

- `id` - идентификатор заявки
- `course_name` - название курса
- `student` - email студента
- `cost` - цена
- `start_date` - начало обучения
- `end_date` - конец обучения
- `point` - цель обучения
- `status` - текущий статус заявки
- `changer` - поменявший её
- `change_date` - дата установки

### Изменение завки

`POST /api/applications/edit/:id`

Обязательный параметр:
- `id` - индентификатор заявки

Ответ в `response`:

- `application_id` - идентификатор заявки

### Отправить заявку на курс

`POST /api/user-applications/add`
Обязательные параметры:
- `course_name` - Название курса
- `cost` - Стоимость курса
- `start_date` - Начало обучения
- `end_date` - Конец обучения
- `point` - Цель обучения
- `student_email` - E-mail студента (для высокопоставленных)

Ответ в `response`:

- `application_id` - идентификатор заявки

### Получить заявки всех пользователей

`POST /api/applications`
Необязательные параметры:
- `limit` - Количество записей от 10 до 100 (по умолчанию 10)
- `page` - Страница записей

Ответ в `response` (массив):

- `id` - идентификатор заявки
- `course_name` - название курса
- `student` - email студента
- `cost` - цена
- `start_date` - начало обучения
- `end_date` - конец обучения
- `point` - цель обучения
- `tutor` - куратор (пустой если еще не закреплен)
- `department` - отдел (пустой если еще не закреплен)
- `status` - текущий статус заявки
- `changer` - поменявший её
- `change_date` - дата установки

## Работа со статусами заявок

Обозначение статусов:

- 0 - На согласовании
- 1 - Отклонено
- 2 - Новая (На рассмотрении админом)
- 3 - В работе
- 4 - Согласование документов (Внутренний)
- 5 - Оплата (Внутренний)
- 6 - Ожидает обучения
- 7 - Пройдено

### Получить историю статусов заявок

`POST /api/statuses/:id`
Обязательный параметр:
- `id` - индентификатор заявки
Необязательные параметры:
- `limit` - Количество записей от 10 до 100 (по умолчанию 10)
- `page` - Страница записей

Ответ в `response` (массив):
- `application_id` - идентификатор заявки
- `changer` - поменявший её
- `change_date` - дата установки
- `status` - статус заявки

### Изменить статус заявки

`POST /api/statuses/edit/:id`
Обязательный параметр:
- `id` - индентификатор заявки
- `status` - Статус

Ответ в `response`:

- `application_id` - идентификатор заявки

## Комментарии к заявкам

### Получить все комментарии к заявке

`POST /api/comments/:application_id`
Обязательный параметр:
- `application_id` - индентификатор заявки

Ответ в `response`:
- `application_id` - идентификатор заявки
- `comms` - массив с комментариями
    - `id` - Идентификатор комментария
    - `sender` - E-mail отправившего
    - `comms_time` - Время отправления
    - `text` - Текст комментария

### Добавить комментарий

`POST /api/comments/:application_id/add`
Обязательный параметр:
- `application_id` - индентификатор заявки
- `message` - текст комментария

Ответ в `response`:
- `application_id` - идентификатор заявки
- `comm_id` - идентификатор комментария

## Пользователи

### Получить профиль текущего пользователя

`POST /api/profile`

Ответ в `response`:

- `first_name` - Имя
- `second_name` - Фамилия
- `middle_name` - Отчество
- `email` - E-mail
- `token` - access_token

### Получить профиль пользователя

`POST /api/profile/:email`

Обязательный параметр:
- `email` - E-mail пользователя

Ответ в `response`:

- `first_name` - Имя
- `second_name` - Фамилия
- `middle_name` - Отчество
- `email` - E-mail